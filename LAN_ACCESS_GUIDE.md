# 局域网访问摄像头权限指南

## 问题分析
现代浏览器为保护用户隐私，要求摄像头等敏感设备的访问必须在安全上下文中进行：
- ✅ HTTPS 网站
- ✅ localhost/127.0.0.1 本地地址
- ❌ HTTP + 局域网 IP 地址（如 192.168.1.3）

## 解决方案

### 方案 1：使用 ngrok 暴露本地服务（推荐）

**步骤：**
1. **下载 ngrok**：访问 https://ngrok.com/download 下载对应平台的版本
2. **解压并运行**：
   - Windows：双击 ngrok.exe
   - Mac/Linux：在终端中运行 `./ngrok http 3002`
3. **获取 HTTPS 地址**：ngrok 会生成一个类似 `https://abc123.ngrok.io` 的地址
4. **在任何设备上访问**：使用生成的 HTTPS 地址，无需配置权限

**优势：**
- 无需修改浏览器设置
- 支持所有设备和浏览器
- 提供真正的 HTTPS 安全连接

### 方案 2：为 Chrome 浏览器添加例外

**步骤：**
1. **打开 Chrome 浏览器**
2. **输入地址**：`chrome://flags/#unsafely-treat-insecure-origin-as-secure`
3. **启用** "Insecure origins treated as secure" 选项
4. **添加例外地址**：`http://192.168.1.3:3002`（使用实际的局域网 IP）
5. **点击 "Relaunch"** 重启浏览器
6. **重新访问**：`http://192.168.1.3:3002/`

### 方案 3：使用 Firefox 浏览器

**步骤：**
1. **打开 Firefox**
2. **访问地址**：`about:config`
3. **搜索**：`media.getusermedia.insecure.enabled`
4. **设置为 true**
5. **重新访问**：`http://192.168.1.3:3002/`

## 服务器配置

### 当前配置
- **地址**：`http://192.168.1.3:3002/`
- **协议**：HTTP
- **状态**：运行正常

### 验证步骤
1. **本地测试**：在电脑上访问 `http://localhost:3002/`，应该可以正常获取摄像头权限
2. **局域网测试**：在手机上使用上述方法后访问 `http://192.168.1.3:3002/`

## 故障排除

### 常见问题
1. **无法访问服务器**
   - 检查电脑和手机是否在同一 Wi-Fi 网络
   - 验证服务器是否正在运行（查看终端输出）
   - 确认防火墙是否允许端口 3002 访问

2. **摄像头权限被拒绝**
   - 按照上述浏览器设置步骤操作
   - 检查系统级摄像头权限设置
   - 尝试使用不同的浏览器

3. **连接不稳定**
   - 确保 Wi-Fi 信号强度良好
   - 关闭电脑上的其他占用网络的应用
   - 尝试使用有线网络连接电脑

## 技术支持

如果遇到问题，请提供以下信息以便排查：
- 使用的浏览器和版本
- 设备类型（电脑/手机/平板）
- 具体的错误信息
- 已尝试的解决方法

---

**注意：** 为了保护用户隐私，现代浏览器的安全策略会不断更新，上述方法可能会随着浏览器版本的更新而变化。